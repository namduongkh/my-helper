!function n(t,e,i){function o(l,a){if(!e[l]){if(!t[l]){var u="function"==typeof require&&require;if(!a&&u)return u(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+l+"'")}var c=e[l]={exports:{}};t[l][0].call(c.exports,function(n){var e=t[l][1][n];return o(e||n)},c,c.exports,n,t,e,i)}return e[l].exports}for(var r="function"==typeof require&&require,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,t,e){"use strict";!function(){angular.module("app",["Jackpot","ngclipboard","GetLink","Common","toastr","angular-loading-bar"]).config(function(n){n.startSymbol("{[{"),n.endSymbol("}]}")})}(),function(){angular.module("Common",[]).config(function(n){n.startSymbol("{[{"),n.endSymbol("}]}")})}(),function(){angular.module("GetLink",[]).config(function(n){n.startSymbol("{[{"),n.endSymbol("}]}")})}(),function(){angular.module("Jackpot",[]).config(function(n){n.startSymbol("{[{"),n.endSymbol("}]}")})}(),function(){function n(){return{publish_email:[{name:"Blog 18",value:"openness.newthinkingnewlife.blog18@blogger.com"}]}}angular.module("Common").service("CommonSvc",n)}(),function(){function n(n,t,e,i,o,r,l,a){var u=this;u.showHtml=!1,u.publish_email=l.publish_email,u.has_publish=!1,u.form={},t.$watch("getContent.view_data",function(n){n&&(n.selector&&(u.form.selector=n.selector),n.url&&(u.form.url=n.url,u.getContent(!0,n.url,n.selector)))}),u.getContent=function(n,t,e,l){if(!n)return void a.error("Form không đủ dữ liệu","Lỗi!");u.has_publish=!1,u.content_data={},r.getContent({url:t}).then(function(n){if(200==n.status)if(n.data.status){var t=document.createElement("div"),r=$(t).html(n.data.content);e&&(r=r.find(e)),u.content_data={title:n.data.title,html:i.trustAsHtml(r.html()),publish_email:u.publish_email[0].value},o(function(){$("#content-result").find("div").on("click",function(){console.log("Clicked!",$(this).find("div")),$(this).find("div").length||this.remove()})}),l&&l()}else a.error("Không lấy được dữ liệu hình ảnh!","Lỗi!");else a.error("Không lấy được dữ liệu hình ảnh!","Lỗi!")}).catch(function(n){console.log("Err",n),a.error("Get image error!","Error!")})},u.getContentManyLink=function(n,t){u.select_publish_email=u.publish_email[0].value,r.getContentManyLink({list_url:n}).then(function(n){200==n.status&&n.data.contents?(u.imageManyLink=n.data.contents.map(function(n){return n.html=i.trustAsHtml(n.image),n}),o(function(){$(".image-many-link").find("img").bind("click",function(){this.remove()})}),t&&t()):a.error("Không lấy được dữ liệu hình ảnh!","Lỗi!")}).catch(function(n){console.log("Err",n),a.error("Get image error!","Error!")})},u.getHtmlImage=function(n){return n?$(n).html():null},u.publish=function(n,t,e){r.publish({html:n,email:t,title:e}).then(function(n){200==n.status&&(a.success("Publish success!","Success!"),$(".close-modal").click()),u.has_publish=!0}).catch(function(){a.error("Publish error!","Error!")})},u.publishMany=function(n,t){n=n.map(function(n){return delete n.html,n}),r.publishMany({contents:n,email:t}).then(function(n){200==n.status&&(a.success("Đã xuất bản","Thành công!"),$(".close-modal").click())}).catch(function(){a.error("Publish error!","Error!")})},u.changeShowHtml=function(){u.showHtml=!u.showHtml},e.$on("GET_IMAGE_FROM_LINK",function(n,t){var e=t.url,i=t.cb;e?u.getContent(e,i):a.error("Không tìm thấy url!","Lỗi!")}),e.$on("GET_IMAGE_FROM_MANY_LINK",function(n,t){var e=t.list_url,i=t.cb;e?u.getContentManyLink(e,i):a.error("Không tìm thấy url!","Lỗi!")}),u.removeFromListLink=function(n){u.imageManyLink.splice(n,1),u.imageManyLink.length||$(".close-modal").click()}}angular.module("GetLink").controller("GetContentController",n)}(),function(){function n(n,t,e,i,o,r,l,a){var u=this;u.showHtml=!1,u.publish_email=l.publish_email,u.has_publish=!1,t.$watch("getImage.view_data",function(n){n&&n.url&&(u.url=n.url,u.getImage(n.url))}),u.getImage=function(n,t){u.has_publish=!1,u.image_data={},r.getImage({url:n}).then(function(n){200==n.status&&n.data.content?(u.image_data={title:n.data.content.title,html:i.trustAsHtml(n.data.content.image),publish_email:u.publish_email[0].value},o(function(){$("#html-result").find("img").bind("click",function(){this.remove()})}),t&&t()):a.error("Không lấy được dữ liệu hình ảnh!","Lỗi!")}).catch(function(n){console.log("Err",n),a.error("Get image error!","Error!")})},u.getImageManyLink=function(n,t){u.select_publish_email=u.publish_email[0].value,r.getImageManyLink({list_url:n}).then(function(n){200==n.status&&n.data.contents?(u.imageManyLink=n.data.contents.map(function(n){return n.html=i.trustAsHtml(n.image),n}),o(function(){$(".image-many-link").find("img").bind("click",function(){this.remove()})}),t&&t()):a.error("Không lấy được dữ liệu hình ảnh!","Lỗi!")}).catch(function(n){console.log("Err",n),a.error("Get image error!","Error!")})},u.getHtmlImage=function(n){return n?"<!--more-->"+$(n).html():null},u.publish=function(n,t,e){r.publish({html:n,email:t,title:e}).then(function(n){200==n.status&&(n.data.status?(a.success("Publish success!","Success!"),$(".close-modal").click()):a.error("Publish error!","Error!")),u.has_publish=!0}).catch(function(){a.error("Publish error!","Error!")})},u.publishMany=function(n,t){n=n.map(function(n){return n.image="<!--more-->"+n.html.$$unwrapTrustedValue(),n}),r.publishMany({contents:n,email:t}).then(function(n){200==n.status&&(a.success("Đã xuất bản","Thành công!"),$(".close-modal").click())}).catch(function(){a.error("Publish error!","Error!")})},u.changeShowHtml=function(){u.showHtml=!u.showHtml},e.$on("GET_IMAGE_FROM_LINK",function(n,t){var e=t.url,i=t.cb;e?u.getImage(e,i):a.error("Không tìm thấy url!","Lỗi!")}),e.$on("GET_IMAGE_FROM_MANY_LINK",function(n,t){var e=t.list_url,i=t.cb;e?u.getImageManyLink(e,i):a.error("Không tìm thấy url!","Lỗi!")}),u.removeFromListLink=function(n){u.imageManyLink.splice(n,1),u.imageManyLink.length||$(".close-modal").click()}}angular.module("GetLink").controller("GetImageController",n)}(),function(){function n(n,t,e,i,o,r,l,a){var u=this;u.publish_email=r.publish_email,n.$watch("getLink.view_data",function(n){n&&n.url&&(u.url=n.url,u.getAllLink())}),u.getAllLink=function(){l.getAllLink({url:u.url,not_allow:u.not_allow}).then(function(n){200==n.status&&n.data.status&&(u.allHref=n.data.href,u.listLink=[])}).catch(function(n){console.log("Err",n),a.error("Get all link error!","Error!")})},u.openGetImage=function(n,e){t.$broadcast("GET_IMAGE_FROM_LINK",{url:n,cb:e})},u.openGetImageModal=function(){$("#openGetImage").modal("show")},u.openGetImageManyLinkModal=function(){$("#openGetImageManyLink").modal("show")},u.getImageManyLink=function(n,e){t.$broadcast("GET_IMAGE_FROM_MANY_LINK",{list_url:n,cb:e})},u.changeListLink=function(n,t){u.selectLink[n]?u.listLink.push(t):u.listLink.splice(u.listLink.indexOf(t),1)},u.checkAll=function(){if(u.listLink=[],u.selectLink=[],u.checkAllLink)for(var n in u.allHref)u.selectLink[n]=!0,u.changeListLink(n,u.allHref[n])}}angular.module("GetLink").controller("GetLinkController",n)}(),function(){function n(n){return{publish:function(t){return n({method:"post",url:"/api/getlink/publish",data:t})},publishMany:function(t){return n({method:"post",url:"/api/getlink/publishMany",data:t})},getImage:function(t){return n({method:"post",url:"/api/getlink/getImage",data:t})},getContent:function(t){return n({method:"post",url:"/api/getlink/getContent",data:t})},getImageManyLink:function(t){return n({method:"post",url:"/api/getlink/getImageManyLink",data:t})},getAllLink:function(t){return n({method:"post",url:"/api/getlink/getAllLink",data:t})}}}angular.module("GetLink").service("GetLinkSvc",n)}(),function(){function n(n,t){var e=this;e.winnings=[],e.getWinningPosition=function(t){n({method:"post",url:"/api/jackpot/getWinningPosition",data:{position:t}}).then(function(n){e.winnings[t]=n.data})},e.getWinnings=function(){for(var n=0;n<6;n++)e.getWinningPosition(n)},e.addWinning=function(){n({method:"post",url:"/api/jackpot/addWinningApi",data:{number:e.add_winning.number,date:e.add_winning.date}}).then(function(n){console.log("Resp",n)})}}angular.module("Jackpot").controller("JackpotController",n)}()},{}]},{},[1]);